<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
        <link rel="stylesheet" href="./CSS/Main.css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
        <title>음식추천</title>

        <style>
            .reroll {
                text-align: center;
            }

            #rerollBtn {
                position: absolute;
                top: 80%;
                left: 50%;
                transform: translate(-50%, -50%);
                text-align: center;
                background-color: #3498db;
                color: #fff;
                font-size: 16px;
                padding: 10px 20px;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                display: flex;
                align-items: center;
            }

            #rerollBtn span {
                margin-left: 5px;
            }

            /* 모바일에서 터치 피드백 추가 */
            #rerollBtn:active {
                background-color: #2980b9;
            }

            a {
                text-decoration: none; /* 밑줄 제거 */
                color: inherit; /* 기본 색상 유지 */
                cursor: pointer; /* 포인터 커서로 변경 */
            }
        </style>
    </head>
    <body onload="mainPageLoad()">
        <section class="title">
            <div class="titlename">
                오늘의 추천
            </div>
        </section>

        <div class="reroll">
            <button id="rerollBtn">
                <i class="fa-solid fa-arrow-rotate-right"></i><span>재추천</span>
            </button>
        </div>

        <section class="slidebox">
            <input type="radio" name="slide" id="slide01" checked>
            <input type="radio" name="slide" id="slide02">
            <input type="radio" name="slide" id="slide03">
            <input type="radio" name="slide" id="slide04">
            <input type="radio" name="slide" id="slide05">
            <ul class="slidelist">
                <li class="slideitem">
                    <div>
                        <label for="slide05" class="left"></label>
                        <label for="slide02" class="right"></label>
                        <a><img class="foodImage" src=""></a>
                        <h2 class="foodName"></h2>  <!-- 이미지와 제목이 같은 div 내부에 위치 -->
                    </div>
                </li>
                <li class="slideitem">
                    <div>
                        <label for="slide01" class="left"></label>
                        <label for="slide03" class="right"></label>
                        <a><img class="foodImage" src=""></a>
                        <h2 class="foodName"></h2>  <!-- 이미지와 제목이 같은 div 내부에 위치 -->
                    </div>
                </li>
                <li class="slideitem">
                    <div>
                        <label for="slide02" class="left"></label>
                        <label for="slide04" class="right"></label>
                        <a><img class="foodImage" src=""></a>
                        <h2 class="foodName"></h2>  <!-- 이미지와 제목이 같은 div 내부에 위치 -->
                    </div>
                </li>
                <li class="slideitem">
                    <div>
                        <label for="slide03" class="left"></label>
                        <label for="slide05" class="right"></label>
                        <a><img class="foodImage" src=""></a>
                        <h2 class="foodName"></h2>  <!-- 이미지와 제목이 같은 div 내부에 위치 -->
                    </div>
                </li>
                <li class="slideitem">
                    <div>
                        <label for="slide04" class="left"></label>
                        <label for="slide01" class="right"></label>
                        <a><img class="foodImage" src=""></a>
                        <h2 class="foodName"></h2>  <!-- 이미지와 제목이 같은 div 내부에 위치 -->
                    </div>
                </li>
            </ul>
        </section>

        <nav class="nav">
            <ul class="navWrap">
                <li>
                    <a href="./Main.html">
                        <i class="fas fa-burger"></i>
                        <p>추천</p>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fas fa-thumbs-up" style="opacity: 0.2;"></i>
                        <p style="opacity: 0.2;">평가</p>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fas fa-user-gear" style="opacity: 0.2;"></i>
                        <p style="opacity: 0.2;">설정</p>
                    </a>
                </li>
            </ul>
        </nav>

        <!-- 모달 팝업 컨테이너 -->
        <div class="modal" id="commentModal">
            <div class="modal-content">
                <span class="close-modal-btn">&times;</span>
                <center>
                    <div class="foodContent" id="naverMapLink1">
                        <i class="fas fa-store"></i>
                        <p>주변 음식점</p>
                    </div>
                    <div class="foodContent">
                        <i class="fas fa-utensils"></i>
                        <p>레시피</p>
                    </div>
                </center>
            </div>
        </div>

        <script src="./JS/Main.js"></script>
        <script>
            function mainPageLoad() {
                // 로컬 스토리지에서 데이터 확인
                const storedData = localStorage.getItem('foodData');

                if (storedData) {
                    // 저장된 데이터가 있다면 사용
                    const data = JSON.parse(storedData);
                    foodNameWriteText(data);
                } else {
                    // 저장된 데이터가 없다면 서버에서 가져와서 사용
                    foodNameFiltering();
                }
            }

            // 리셋 버튼 클릭 시 로컬 스토리지에서 플래그 제거하여 다음에 페이지 로드시 함수가 다시 실행되도록 설정
            document.getElementById('rerollBtn').addEventListener('click', function () {
                localStorage.removeItem('foodData');
                location.reload(); // 페이지 새로고침
            });

            // 2시간 간격으로 반복 실행
            setInterval(function () {
                localStorage.removeItem('foodData');
            }, 2 * 60 * 60 * 1000); // 2시간(밀리초 단위)
        </script>
    </body>
</html>